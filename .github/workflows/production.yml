name: Production

on:
  push:
    branches:
      - develop
jobs:
  strategy:
    matrix:
      node-version: [10.x, 12.x, 14.x, 15.x]
      os: ['ubuntu-latest', 'windows-latest', 'macos-latest']

  runs-on: ${{matrix.os}}
  steps:
    - name: Checkout
      uses: actions/checkout@v3

    - name: Setup Node Runner
      uses: actions/setup-node@v3
      with:
        node-version: ${{matrix.node-version}}
        cache: npm

    - name: Install Dependencies
      run: npm install

    - name: Run Unit & Integration Tests
      run: npm test

    - name: Merge To Master
      uses: devmasx/merge-branch@master
      with:
        type: now
        target_branch: master
